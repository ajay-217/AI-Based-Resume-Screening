<!DOCTYPE html>
<html>
<head>
<title>Resume AI</title>
<link rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="container mt-4">

<h2>AI Resume Screening</h2>

<input type="file" id="file">
<button class="btn btn-primary" onclick="upload()">Upload</button>

<hr>

<input id="skills" placeholder="python,sql,react">
<button class="btn btn-success" onclick="rank()">Rank</button>

<table class="table mt-3" id="table"></table>
<canvas id="chart"></canvas>

<script>
async function upload(){
 let file=document.getElementById("file").files[0];
 let form=new FormData();
 form.append("file",file);

 await fetch("http://127.0.0.1:8000/upload",{
  method:"POST",
  body:form
 });
 alert("Uploaded");
}

async function rank(){
 let skills=document.getElementById("skills").value.split(",");

 let res=await fetch("http://127.0.0.1:8000/rank",{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify(skills)
 });

 let data=await res.json();

 let rows="<tr><th>Score</th></tr>";
 data.forEach(c=>rows+=`<tr><td>${c.score}</td></tr>`);
 document.getElementById("table").innerHTML=rows;

 new Chart(document.getElementById("chart"),{
  type:"bar",
  data:{
   labels:data.map((_,i)=>"Candidate "+(i+1)),
   datasets:[{label:"Score",data:data.map(c=>c.score)}]
  }
 });
}
</script>

</body>
</html>